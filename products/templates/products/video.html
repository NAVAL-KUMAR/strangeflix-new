{% extends "products/parent.html" %}

{% block title %}
Video 
{% endblock %}

{% block body %}


<div>
<div class="container-fluid">
<div class="row">
    <div style="margin-top:10px;" class="form-group col-md-9">
        <div  id = "video_player_box" class="row" style="margin-left: 5px;margin-right: 5px;height:720 ">
            <div class="row">
                <video id="my_video" autoplay style="width:100%;" preload="metadata"  poster="{{video.thumbtail.url}}">
             <source src= "{{video.filename.url}}" type="video/mp4">
                 Your browser does not support the video tag.
                </video>
            </div>
            <div id = "video_control_bar" class = "row mx-auto" >
                <div class="row mx-auto" style="margin-top:30px;">

                    <svg id = "backward10"   xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 171 171" ><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,171.99818v-171.99818h171.99818v171.99818z" fill="none"></path><g fill="#ffffff"><path d="M74.8125,110.4375h-10.6875v-36.69375l-10.6875,4.63125v-8.90625l20.30625,-8.90625h1.06875zM117.5625,89.775c0,6.4125 -1.425,11.75625 -4.63125,15.31875c-3.20625,3.5625 -7.48125,5.34375 -13.18125,5.34375c-5.7,0 -9.975,-1.78125 -13.18125,-5.34375c-3.20625,-3.5625 -4.63125,-8.55 -4.63125,-15.31875v-8.90625c0,-6.4125 1.425,-11.75625 4.63125,-15.31875c3.20625,-3.5625 7.48125,-5.34375 13.18125,-5.34375c5.7,0 9.975,1.78125 13.18125,5.34375c3.20625,3.5625 4.63125,8.55 4.63125,15.31875zM106.875,79.0875c0,-3.91875 -0.7125,-6.76875 -1.78125,-8.55c-1.06875,-1.78125 -2.85,-2.85 -5.34375,-2.85c-2.49375,0 -4.275,0.7125 -5.34375,2.49375c-1.06875,1.78125 -1.78125,4.63125 -1.78125,8.19375v13.5375c0,3.91875 0.7125,6.76875 1.78125,8.55c1.06875,1.78125 2.85,2.85 5.34375,2.85c2.49375,0 4.275,-1.06875 5.34375,-2.85c1.06875,-1.78125 1.78125,-4.63125 1.78125,-8.55v-12.825z"></path><path d="M85.5,42.75l-28.5,-21.375l28.5,-21.375z"></path><path d="M85.5,156.75c-39.1875,0 -71.25,-32.0625 -71.25,-71.25c0,-16.74375 6.05625,-33.13125 17.1,-45.95625l10.6875,9.2625c-8.90625,9.975 -13.5375,23.15625 -13.5375,36.69375c0,31.35 25.65,57 57,57c31.35,0 57,-25.65 57,-57c0,-31.35 -25.65,-57 -57,-57h-11.4v-14.25h11.4c39.1875,0 71.25,32.0625 71.25,71.25c0,39.1875 -32.0625,71.25 -71.25,71.25z"></path></g></g></svg>
                     <i  id="next" class="fa fa-step-backward"  aria-hidden="true"></i>
                     <i id = "playpausebtn"  class="fa fa-play"  aria-hidden="true"></i>
                     <i id = "previous" class="fa fa-step-forward"  aria-hidden="true"></i>
                    <svg id = "forward10"   xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 171 171" ><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,171.99818v-171.99818h171.99818v171.99818z" fill="none"></path><g fill="#ffffff"><path d="M74.8125,110.4375h-10.6875v-36.69375l-10.6875,4.63125v-8.90625l20.30625,-8.90625h1.06875zM117.5625,89.775c0,6.4125 -1.425,11.75625 -4.63125,15.31875c-3.20625,3.5625 -7.48125,5.34375 -13.18125,5.34375c-5.7,0 -9.975,-1.78125 -13.18125,-5.34375c-3.20625,-3.5625 -4.63125,-8.55 -4.63125,-15.31875v-8.90625c0,-6.4125 1.425,-11.75625 4.63125,-15.31875c3.20625,-3.5625 7.48125,-5.34375 13.18125,-5.34375c5.7,0 9.975,1.78125 13.18125,5.34375c3.20625,3.5625 4.63125,8.55 4.63125,15.31875zM106.875,79.0875c0,-3.91875 -0.7125,-6.76875 -1.78125,-8.55c-1.06875,-1.78125 -2.85,-2.85 -5.34375,-2.85c-2.49375,0 -4.275,0.7125 -5.34375,2.49375c-1.06875,1.78125 -1.78125,4.63125 -1.78125,8.19375v13.5375c0,3.91875 0.7125,6.76875 1.78125,8.55c1.06875,1.78125 2.85,2.85 5.34375,2.85c2.49375,0 4.275,-1.06875 5.34375,-2.85c1.06875,-1.78125 1.78125,-4.63125 1.78125,-8.55v-12.825z"></path><path d="M85.5,42.75l28.5,-21.375l-28.5,-21.375z"></path><path d="M85.5,156.75c-39.1875,0 -71.25,-32.0625 -71.25,-71.25c0,-39.1875 32.0625,-71.25 71.25,-71.25h11.4v14.25h-11.4c-31.35,0 -57,25.65 -57,57c0,31.35 25.65,57 57,57c31.35,0 57,-25.65 57,-57c0,-13.5375 -4.63125,-26.71875 -13.5375,-37.05l10.6875,-9.2625c11.04375,13.18125 17.1,29.56875 17.1,46.3125c0,39.1875 -32.0625,71.25 -71.25,71.25z"></path></g></g></svg>
                    <i id = "fullscreenbtn"    class="fa fa-arrows-alt" aria-hidden="true"></i>
                     <form  class="range-field" style="color:white;margin:15px;">
                        <input  id ="seekslider" type="range" min="0" max="100" step = "1" value="0"/>
                        <span id ="curtimetext" >00:00/</span><span id = "durtimetext" >00:00</span>
                    </form>
                    <i id = "mutebtn" class="fa fa-volume-up"   aria-hidden="true"></i>
                     <form class="range-field" style="color:white;margin:15px;">
                        <input  id ="volumeslider" type="range" min="0" max="100" step = "1" value="100"/>
                     </form>
                </div>
            </div>
        </div>
        {% if user.is_staff%}
        <form method="POST" action="/delete_video">
          {% csrf_token %}
          <input type="hidden" name="idvideo" value="{{video.id}}">
          
 <button type="submit" style="cursor: pointer; background-color: rgb(200,0,137);width: 100%;">Deleat</button>

 </form>
 {% endif %}

        <div class="row" >

            <h4 class="col-ms-8" style="margin-top: 7px;margin-left: 15px; ">{{ video.title }}</h4>
            <p class="col-ms-1" style="margin-top: 7px;margin-left: 15px; ">{{ video.views }} Views</p>
            <p class="col-ms-1" id = "total_likes" style="margin-top: 7px;margin-left: 15px;">{{ video.likes }} <i class="fa fa-thumbs-up" style="font-size:20px;color:grey;"> </i></p>
            <p class="col-ms-1" id = "total_dislikes" style="margin-top: 7px;margin-left: 15px; ">{{ video.dislikes }} <i class="fa fa-thumbs-down" style="font-size:20px;color:grey;"> </i></p>
            <p style="margin-top: 7px;margin-left: 15px; ">Description  : {{ video.description }}</p>

        </div>
        
         
         <div class="row" style="margin-left: 5px;margin-right: 5px; ">

           
            <i class="fa fa-thumbs-up" id = "liked"
               {% if like_dislike.like == 1 %}
                    style="font-size:30px;color:blue;"
               {% endif %}
                    style="font-size:30px;color:aqua;"> </i>

          

            
            <i class="fa fa-thumbs-down" id = "disliked"
               {% if like_dislike.like == -1 %}
                    style="font-size:30px;color:red;margin-left: 90px;"
               {% endif %}
                    style="font-size:30px;color:grey;margin-left: 90px;"> </i>
           

            
            <i class="fa fa-heart" id = "favourite"
               {% if fav.favourite %}
                    style="cursor: pointer; font-size:30px;color:red;margin-left: 90px;"
               {% endif %}
                    style="cursor: pointer; font-size:30px;color:black;margin-left: 90px;" aria-hidden="true"></i>
         

             
            
            <i id="btn_flag" class="fa fa-flag" style="margin-left: 90px;cursor: pointer; font-size:30px;color:black;" aria-hidden="true"></i>
            

            


        </div>
       
        <br>
         {% if user.is_staff%}
        <div class="row" >
           <div class="container" >
           <form  action="{%url 'add_tag' %}" method="POST">
            {% csrf_token %}
          <label for="tg1"><b>Tag of video: </b></label>
          <input placeholder="add tag" id="tg1" style="width: 400px"  type="text" name="tag_info">
          <input type='hidden' name="video_id" value="{{ video.id }}">
          <input value="add tag" type="submit" style="width: 100px" name="tag_submit">
          <select>
             
             <option disabled selected>all added tags</option>

             {%for tag in tag%}
              <option>{{tag.title}}</option>
             {% endfor %}
         </select>
           </form>
        
         
           </div>

        </div>
        <br>
        {% endif %}


  <div class="row">


      <div class="container">
        <form class="forms-group row" action="/comment" id = "form_comment" method="POST">
            {% csrf_token %}
            <label for="comment" class="col-sm-2 col-form-label">Add Comment : </label>
            <div class="col-sm-8">
            <input type="text" class="form-control" id="comment"  placeholder="Add Comment">
            </div>
            <input type='hidden' id='video_id' value='{{ video.id }}'>
            <button type="submit" class="fa fa-paper-plane " style="font-size:35px;color:green;background:none;border:none;"></button>
        </form>
          <table>
            <thead>
            <th>text</th>

            </thead>
            <tbody id="commment_list">
                   {% for comment in comments %}
                    <tr>
                         <td>{{ comment.user}}</td>
                         <td>{{ comment.text}}</td>
                         <td>{{ comment.datetime}}</td>
                    </tr>
                   {% endfor %}
            </tbody>

            </tbody>
          </table>
        </div>

        </div>
    </div>
    <div class="form-group col-md-3">
             {% for video in most_recent_videos %}
            <div style="margin-top:15px;margin-left:10px;margin-right:10px" class="row">
            <a href='/video/{{ video.id }}'>
            <img style="width:100%; height:225px;" src="{{video.thumbtail.url}}" alt="My image" class="img-thumbnail"></a>
            <h6 style="margin-top: 7px;margin-left: 15px; ">{{ video.title }}</h6>
              <small style="margin-top: 0px;margin-left: 16px;" class="text-muted">Uploaded by {{ video.user }} on {{ video.datetime }}</small>
            </div>

              {% endfor %}
    </div>
</div>
</div>



{% load static %}
<script src="{% static 'addComment.js' %}" type="text/javascript"></script>
<script src="{% static 'scripts.js' %}"></script>
</div>
<!--{% load static %}-->
<!--<script src="{% static 'comment_list.js' %}" type="text/javascript"></script>-->
<div class="bg-modal" style="width: 100%; height: 200%;background-color: black;opacity: 0.85;position: absolute;top: 0;display: flex;justify-content: center;align-items: center;display: none;">
<div class="modal-content" style=" overflow: scroll;width: 50%;height: 40%;background-color: white;opacity: 1;border-radius: 10px;padding: 20px;position: relative;">
    <div class="close" style=" position: absolute;top: 0;right: 14px;font-size: 42px;transform: rotate(45deg);cursor: pointer;">+</div>
<h4 style="color: blue"><b>Reason To Repote</b></h4>
<form method="POST" action="{% url 'flag' %}">
    {% csrf_token %}
    <label for="reason_detail"><h5><b>Additional Information:</b></h5></label>
    <br>
    <textarea style="height: 80%;width: 90%;" type="text" name="reason_detail" ></textarea>
    <input type="hidden" name="videoid" value='{{ video.id }}'>
    <br>
    <br>
  <input value="submit" type="submit" style="border-radius: 5px; width: 40%;height: 30%; color: green;">

  </form>
    </div>
</div>

<script type="text/javascript">
document.getElementById('btn_flag').addEventListener('click',function(){
  document.querySelector('.bg-modal').style.display='flex';

}); 
document.querySelector('.close').addEventListener('click',function(){
  document.querySelector('.bg-modal').style.display='none';
});

</script>

{% endblock %}


